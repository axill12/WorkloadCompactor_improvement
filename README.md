It works always, except sometimes when the first pair arrives, as the two first requests that arrived at this server. Moreover if two or more requests arrive at the same time it splits the tokens according to the amount of work of its requests. Specifically it gives to request r1 with a1 amount of work tokens depending on a1 / (a1 + a2 + ... + an). The closer fraction is to 1 the more tokens it assignes. The rest tokens are assigned to the other requests by same way. Now WorkScheduler can support from 1 to 3 servers simultaneously. It does not functions properly when 2 or more requests arrive at the same moment and another or others arrive very closely, but not at the same moment. Furthermore it does not splits token properly sometimes when three or more requests arrive at the same moment.
