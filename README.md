This works in all cases except maybe a rare one, which happens when the time's arrival difference is more than 10 milliseconds. It works even when two or more pairs of two requests arrive, from which each request of pair arrive with more than 10 milliseconds diffrence than the other request. Furthermore it works even when two or more pairs of two requests arrive, from which each request of pair arrive at the same moment. I still need to alter it in a way so that it does not share the tokens if two requests arrive with 10 or less milliseconds difference, except if they arrive the same moment. Finally i need to remove the redundant code.
